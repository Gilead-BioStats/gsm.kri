meta:
  Type: Analysis
  ID: srs0001
  GroupLevel: Site
  Abbreviation: SRS
  Metric: Site Risk Score
  Numerator: Weight
  Denominator: Maximum Weights
  Model: Identity
  Score: Normalized Risk Score
  AnalysisType: identity
  Priority: 4
steps:
  - output: lAnalysis_filtered
    name: gsm.kri::FilterAnalysis
    params:
      lAnalysis: lData
      strFilterIDPattern: kri
  - output: dfFlaggedWeights
    name: gsm.kri::StackAnalysis
    params:
      lAnalysis: lAnalysis_filtered
      strName: "Analysis_Flagged"
  - output: dfResults
    name: base::subset
    params:
      x: dfFlaggedWeights
      select:
        - GroupLevel
        - GroupID
        - MetricID
        - Flag
  - output: dfWeights
    name: base::subset
    params:
      x: dfFlaggedWeights
      select:
        - MetricID
        - Flag
        - Weight
        - WeightMax
  - output: Analysis_Summary
    name: gsm.kri::CalculateRiskScore
    params:
      - dfResults
      - dfWeights
  - output: lAnalysis
    name: list
    params:
      ID: ID
      Analysis_Summary: Analysis_Summary

