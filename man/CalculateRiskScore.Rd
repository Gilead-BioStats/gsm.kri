% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/CalculateRiskScore.R
\name{CalculateRiskScore}
\alias{CalculateRiskScore}
\title{Calculate Risk Score}
\usage{
CalculateRiskScore(dfResults, strMetricID = "Analysis_srs0001")
}
\arguments{
\item{dfResults}{`data.frame` Dataframe of stacked analysis outputs from the metrics calculated in the
`workflow/2_metrics` workflows. Must contain the columns `GroupLevel`, `GroupID`, `MetricID`, `Weight`, and `WeightMax`.}

\item{strMetricID}{`character` The MetricID to assign to the calculated risk scores. Default is "Analysis_srs0001".}
}
\value{
`data.frame` with risk score data containing columns: `GroupLevel`, `GroupID`, `MetricID`, 
`Numerator` (sum of weights), `Denominator` (sum of max weights across all metrics), 
`Metric` (risk score percentage), `Score` (same as Metric), and `Flag` (set to NA).
}
\description{
Calculates the risk score for each group in the provided results data frame.
The function aggregates weighted flag values across all metrics for each group,
creating a composite risk score as a percentage of the total possible risk.
}
\details{
The function calculates risk scores by:
\enumerate{
  \item Summing the `Weight` values for each group across all metrics
  \item Calculating a global denominator as the sum of `WeightMax` values across all unique metrics
  \item Computing the risk score as (Numerator / Denominator) * 100
}

Risk scores represent the percentage of total possible risk that each group exhibits,
allowing for comparison across groups and identification of high-risk sites or entities.
}
\examples{
# Prepare data with weights from gsm.core::reportingResults
library(dplyr)

# Filter to remove any existing risk scores and add weight columns
dfResults <- gsm.core::reportingResults \%>\%
  dplyr::filter(!grepl("srs0001", MetricID))

# Calculate risk scores
dfRiskScore <- CalculateRiskScore(dfResults)
}
